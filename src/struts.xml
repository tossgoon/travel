<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" 
 "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
	<constant name="struts.i18n.encoding" value="UTF-8" />
	<constant name="struts.i18n.reload" value="false" />
	<constant name="struts.objectFactory" value="spring" />
	<constant name="struts.multipart.maxSize" value="209715200"/>
	<package name="usercheck" extends="struts-default">
		<!-- 定义一个拦截器 -->
		<interceptors>
			<interceptor name="authority"
				class="com.travel.interceptor.LoginInterceptor">
			</interceptor>
			<!-- 拦截器栈 -->
			<interceptor-stack name="mydefault">
				<interceptor-ref name="defaultStack" />
				<interceptor-ref name="authority" />
			</interceptor-stack>
		</interceptors>
		<!-- 定义默认拦截器 -->
		<default-interceptor-ref name="mydefault" />
		<!-- 定义全局处理结果 -->
		<global-results>
			<result name="login">/visitor/first.action</result>
		</global-results>
	</package>

	<!-- <package name="jkgisio" extends="struts-default,json-default">
		<action name="download" class="attfileDownLoad">
			<result name="success" type="stream">
				<param name="contentType">text/plain</param>
				<param name="inputName">fileInput</param>
				<param name="contentDisposition">attachment;filename="${fileName}"</param>
			</result>
			<result name="error">/jkgis/downloaderror.jsp</result>
		</action>
		<action name="upload" class="attfileUpLoad">
			<result name="success" type="json"></result>
		</action>
	</package>
	<package name="kcpack" extends="struts-default,json-default"
		namespace="/kc">
		<global-results>
			<result name="error">/jkgis/error.jsp</result>
			<result name="success">/jkgis/success.jsp</result>
		</global-results>
		<action name="query" class="kcgcAct" method="query">
			<result name="success" type="json"></result>
		</action>
		<action name="delete" class="kcgcAct" method="delete">
			<result name="success" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${kcgc.name}+" 已删除.√"</param>
				<param name="type">1</param>
			</result>
			<result name="error" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${kcgc.name}" 删除出错.×"</param>
				<param name="type">0</param>
			</result>
		</action>
		<action name="update" class="kcgcAct" method="update">
			<interceptor-ref name="defaultStack"></interceptor-ref>
			<interceptor-ref name="token"></interceptor-ref>
			<result name="invalid.token">/jkgis/kc/gcinfo.jsp</result>
			<result name="success" type="redirect">/kc/update.action?param=0&amp;id=${kcgc.id}
			</result>
			<result name="success" type="json"></result>
			<result name="gcinfo">
				/jkgis/kc/gcinfo.jsp
			</result>
		</action>
		<action name="updateCoordGCJ02" class="kcgcAct" method="updateCoordGCJ02">
		</action>
		<action name="add" class="kcgcAct" method="add">
			<result name="addKcgc">/jkgis/kc/add.jsp</result>
		</action>
	</package>
	<package name="gccommentpack" extends="struts-default,json-default"
		namespace="/gccomment">
		<global-results>
			<result name="error">/jkgis/error.jsp</result>
			<result name="success">/jkgis/kc/gcinfo.jsp</result>
		</global-results>
		<action name="query" class="gccommentAct" method="query">
			<result name="success" type="json"></result>
		</action>
		<action name="delete" class="gccommentAct" method="delete" />
		<action name="update" class="gccommentAct" method="update">
			<result name="success" type="json"></result>
		</action>
		<action name="add" class="gccommentAct" method="add">
			<result name="success" type="json"></result>
		</action>
	</package>
	<package name="gcattpack" extends="struts-default,json-default"
		namespace="/gcatt">
		<global-results>
			<result name="error">/jkgis/error.jsp</result>
			<result name="success">/jkgis/kc/gcinfo.jsp</result>
		</global-results>
		<action name="query" class="gcattAct" method="query">
			<result name="success" type="json"></result>
		</action>
		<action name="delete" class="gcattAct" method="delete">
			<result name="success" type="json"></result>
		</action>
		<action name="update" class="gcattAct" method="update">
			<result name="success" type="json"></result>
		</action>
		<action name="add" class="gcattAct" method="add">
			<result name="success">/jkgis/kc/add.jsp</result>
		</action>
	</package>
	<package name="zkpack" extends="struts-default,json-default"
		namespace="/zk">
		<interceptors>
			<interceptor name="preExcept"
				class="com.jktech.interceptor.ExceptInterceptor">
			</interceptor>
		</interceptors>
		<global-results>
			<result name="error">/jkgis/error.jsp</result>
			<result name="success">/jkgis/success.jsp</result>
		</global-results>
		<action name="query" class="kczkAct" method="query">
			<result name="success">/jkgis/zk/zkinfo.jsp</result>
			<result name="error">/jkgis/error.jsp</result>
		</action>
		<action name="delete" class="kczkAct" method="delete">
			<result name="success" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${kczk.bianhao}
					" 已删除.√"</param>
				<param name="type">1</param>
			</result>
			<result name="error" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${kczk.bianhao} " 删除出错.×"</param>
				<param name="type">0</param>
			</result>
		</action>
		<action name="update" class="kczkAct" method="update">
			<result name="success" type="json"></result>
			<result name="zkinfo"> /jkgis/zk/zkinfo.jsp
			</result>
			<result name="input">/jkgis/zk/zkinfo.jsp</result>
			<interceptor-ref name="preExcept"></interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		<action name="add" class="kczkAct" method="add">
			<result name="addKczk">/jkgis/zk/add.jsp</result>
		</action>
	</package>
	<package name="tcpack" extends="struts-default,json-default"
		namespace="/tc">
		<global-results>
			<result name="error">/jkgis/error.jsp</result>
			<result name="success">/jkgis/success.jsp</result>
		</global-results>
		<action name="query" class="kctcAct" method="query">
			<result name="success" type="json"></result>
		</action>
		<action name="delete" class="kctcAct" method="delete">
			<result name="success" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${kctc.bianhao} " 已删除.√"</param>
				<param name="type">1</param>
			</result>
			<result name="error" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${kctc.bianhao} " 删除出错.×"</param>
				<param name="type">0</param>
			</result>
		</action>
		<action name="update" class="kctcAct" method="update">
			<result name="success" type="json"></result>
			<result name="tcinfo"> /jkgis/tc/tcinfo.jsp
			</result>
		</action>
		<action name="add" class="kctcAct" method="add">
			<result name="addKctc">/jkgis/tc/add.jsp</result>
		</action>
	</package>
	<package name="dcxxpack" extends="struts-default,json-default"
		namespace="/dcxx">
		<global-results>
			<result name="error">/jkgis/error.jsp</result>
			<result name="success">/jkgis/success.jsp</result>
		</global-results>
		<action name="update" class="kcdcxxAct" method="update">
			<result name="success" type="json"></result>
			<result name="dcxxinfo"> /jkgis/dcxx/dcxxinfo.jsp
			</result>
		</action>
		<action name="add" class="kctcAct" method="add">
			<result name="addKctc">/jkgis/tc/add.jsp</result>
		</action>
	</package> -->

	<package name="userpack" extends="struts-default,json-default,usercheck"
		namespace="/user">
		<global-results>
			<result name="error">/travel/error.jsp</result>
			<result name="success">/travel/success.jsp</result>
		</global-results>

		<action name="update" class="userAct" method="update">
			<result name="success" type="json"></result>
			<result name="error">
				/travel/error.jsp
			</result>
		</action>
		
		<action name="updatepass" class="userAct" method="updateUserPass">
			<result name="success" type="json"></result>
			<result name="error"  type="json">
			</result>
		</action>

		<action name="delete" class="userAct" method="delete">
			<!-- <result name="success" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${user.username}+" 已删除.√"</param>
				<param name="type">1</param>  <interceptor-ref name="mydefault" />  
			</result> -->
			<!-- <result name="error" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${user.username}" 删除出错.×"</param>
				<param name="type">0</param>
			</result> -->
			<result name="success" type="json">
			</result>
			<result name="error" type="json">
			</result>
		</action>

		<!-- <action name="update" class="userAct" method="update">
			<interceptor-ref name="defaultStack"></interceptor-ref>
			<interceptor-ref name="token"></interceptor-ref>
			<result name="invalid.token">/jkgis/kc/gcinfo.jsp</result>
			<result name="success" type="redirect">/user/update.action?param=0&amp;id=${user.id}
			</result>
			<result name="success" type="json"></result>
			<result name="userinfo" type="json">
			</result>
		</action> -->
		<action name="add" class="userAct" method="add">
			<result name="error" type="json"></result>
			<result name="success" type="json"></result>
		</action>
		<action name="query" class="userAct" method="query">
 			<result name="success">/oaadmin/userlist.jsp</result>
			 <result name="getalluser" type="json"></result> 
		</action>
		<action name="querypage" class="userAct" method="queryByPage">
 			<result name="success">/oaadmin/userlist.jsp</result>
			 <result name="error" type="json"></result> 
		</action>
		
	</package>

    <package name="portalpack" extends="struts-default,json-default,usercheck"
		namespace="/portal">
		<global-results>
			<result name="error">/travel/error.jsp</result>
			<result name="success">/user/success.jsp</result>
		</global-results>

		<action name="update" class="portalAct" method="update">
			<result name="success" type="json"></result>
			<result name="error">
				/travel/error.jsp
			</result>
		</action>

		<action name="delete" class="portalAct" method="delete">
			<!-- <result name="success" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${user.username}+" 已删除.√"</param>
				<param name="type">1</param>
			</result> -->
			<!-- <result name="error" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${user.username}" 删除出错.×"</param>
				<param name="type">0</param>
			</result> -->
			<result name="success" type="json">
			</result>
			<result name="error" type="json">
			</result>
		</action>
		<action name="add" class="portalAct" method="add">
			<result name="error" type="json"></result>
			<result name="success" type="json"></result>
		</action>
		<action name="query" class="portalAct" method="query">
		    <result name="portalinfo">/portal/editor.jsp</result>
 			<result name="success">/oaadmin/portallist.jsp</result>
			<!-- <result name="success" type="json"></result> -->
		</action>
		<action name="save" class="portalAct" method="save">
			<result name="error" type="json"></result>
			<result name="success" type="json"></result>
		</action>
		<action name="querypage" class="portalAct" method="queryByPage">
 			<result name="success">/oaadmin/portallist.jsp</result>
			 <result name="error" type="json"></result> 
		</action>
	</package>
	
	<package name="visitor" extends="struts-default,json-default"	namespace="/visitor">
	   <action name="first" class="portalAct" method="showfirst">
		  <result name="success">/portal/index.jsp</result>
		  <!-- <result name="success" type="json"></result> -->
	   </action>
	   <action name="show" class="portalAct" method="show">
			<result name="error" type="json"></result>
			<result name="success">/portal/portalshow.jsp</result>
		</action>
		
		<action name="loginout" class="userAct" method="signout">
		    <result name="error" type="json"></result>
			<result name="success" type="redirectAction">
		      <param name="actionName">first</param>
		      <param name="namespace">/visitor</param>
		    </result> 
		</action>
		
	   <action name="login" class="userAct" method="login">
			<result name="error">/travel/user/login.jsp</result>
			<result name="admin" type="redirectAction">
		      <param name="actionName">querypage</param>
		      <param name="namespace">/user</param>
		    </result> 
		    <result name="normal" type="redirectAction">
		      <param name="actionName">loginsuccess</param>
		      <param name="namespace">/oa</param>
		    </result> 
			<!-- <result name="error" type="chain">
		      <param name="actionName">first</param>
		      <param name="namespace">/visitor</param>
		    </result> 
			<result name="success" type="chain">
		      <param name="actionName">first</param>
		      <param name="namespace">/visitor</param>
		    </result> 
		    <result name="input" type="chain">
		      <param name="actionName">first</param>
		      <param name="namespace">/visitor</param>
		    </result>  -->	
		</action>
		<action name="querypage" class="portalAct" method="queryByPage">
 			<result name="success">/portal/portallistshow.jsp</result>
			 <result name="error" type="json"></result> 
		</action>
		<action name="searchpage" class="portalAct" method="searchByPage">
 			<result name="success">/portal/searchlist.jsp</result>
			 <result name="error" type="json"></result> 
		</action>
   </package>
	
	<package name="oapack" extends="struts-default,json-default,usercheck"
		namespace="/oa">
		<global-results>
			<result name="error">/travel/error.jsp</result>
			<result name="success">/user/success.jsp</result>
		</global-results>

		<action name="update" class="oaAct" method="update">
			<result name="success" type="json"></result>
		</action>
		
		<action name="modify" class="oaAct" method="modify">
			<result name="success">/travel/user/useroa.jsp</result>
		</action>
		
		<action name="setread" class="oaAct" method="setread">
			<result name="success"  type="json"></result>
		</action>

		<action name="delete" class="oaAct" method="delete">
			<!-- <result name="success" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${user.username}+" 已删除.√"</param>
				<param name="type">1</param>
			</result> -->
			<!-- <result name="error" type="redirect">
				<param name="location">/jkgis/tipinfo.jsp</param>
				<param name="info">${user.username}" 删除出错.×"</param>
				<param name="type">0</param>
			</result> -->
			<result name="success" type="json">
			</result>
			<result name="error" type="json">
			</result>
		</action>
		<action name="add" class="oaAct" method="add">
			<result name="error" type="json"></result>
			<result name="success" type="json"></result>
		</action>
		
		<action name="querysend" class="oaAct" method="querysend">
		    <result name="oainfo">/travel/user/useroa.jsp</result>
 			<result name="success">/travel/user/oasend.jsp</result>
			<!-- <result name="success" type="json"></result> -->
		</action>
		
		<action name="queryreceive" class="oaAct" method="queryreceive">
 			<result name="success">/travel/user/oareceive.jsp</result>
 			<result name="error">/travel/user/error.jsp</result>
		</action>
		
		<action name="querydeal" class="oaAct" method="querydeal">
 			<result name="success">/travel/user/oadeal.jsp</result>
 			<result name="error">/travel/user/error.jsp</result>
		</action>
		
		<action name="query" class="oaAct" method="query">
 			<result name="success">/travel/user/oaview.jsp</result>
 			<result name="error">/travel/user/error.jsp</result>
		</action>
		
		<action name="save" class="oaAct" method="save">
			<result name="error" type="json"></result>
			<result name="success" type="json"></result>
		</action>
		
		<action name="loginsuccess" class="oaAct" method="loginsuccess">
		    <result name="normal" type="redirectAction">
		      <param name="actionName">querynotifysend</param>
		      <param name="namespace">/oa</param>
		    </result> 
		    <result name="error">/travel/user/login.jsp</result>
		    <!-- <result name="admin">/oa/portallist.jsp</result> -->
		    <!-- <result name="admin" type="redirect">/travel/user/querypage</result>   -->
		    <result name="admin" type="redirectAction">
		      <param name="actionName">querypage</param>
		      <param name="namespace">/user</param>
		    </result> 
		</action>
		<action name="addnotify" class="oaAct" method="addnotify">
			<result name="error" type="json"></result>
			<result name="success" type="json"></result>
		</action>
		<action name="querynotify" class="oaAct" method="queryNotifyByPage">
 			<result name="success">/oaadmin/notifylist.jsp</result>
			 <result name="error" type="json"></result> 
		</action>
		<action name="querynotifysend" class="oaAct" method="queryNotifySendByPage">
 			<result name="success">/travel/user/oanotify.jsp</result>
			 <result name="error" type="json"></result> 
		</action>
		<action name="savenotify" class="oaAct" method="savenotify">
			<result name="error" type="json"></result>
			<result name="success" type="json"></result>
		</action>
		<action name="modifynotify" class="oaAct" method="modifyNotify">
			<result name="success">/oaadmin/notifyedit.jsp</result>
			<result name="error" type="json"></result>
		</action>
		<action name="viewnotify" class="oaAct" method="viewnotify">
 			<result name="success">/oaadmin/notifyview.jsp</result>
 			<result name="error" type="json"></result>
		</action>
	</package>
	
	<package name="fileio"  extends="struts-default,json-default,usercheck" namespace="/fileio">
		<action name="upload" class="fileUpLoad">
			<result name="success" type="json"></result>
			<result name="error" type="json"></result>
		</action>
		<action name="download" class="fileDownLoad">
			<result name="success" type="stream">
				<param name="contentType">text/plain</param>
				<param name="inputName">fileInput</param>
				<param name="contentDisposition">attachment;filename="${fileName}"</param>
			</result>
			<result name="error">/travel/error.jsp</result>
		</action>
	</package>
	
</struts>    
